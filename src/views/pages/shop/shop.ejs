<%- include('../../layout/header.ejs'); %>

<div class="tt-breadcrumb">
	<div class="container">
		<ul>
			<li><a href="/">Home</a></li>
			<li><a href="/shop">Shop</a></li>
		</ul>
	</div>
</div>
<div id="tt-pageContent">
	<div class="container-indent-04">
		<div class="container">
			<div class="tt-block-title tt-sub-pages">
				<h1 class="tt-title">Inventory</h1>
				<div class="tt-description">New and Used Inventory Listings</div>
			</div>
			<div class="row">
				<div class="col-md-4 col-lg-3 col-xl-3 leftColumn tt-aside02 js-sticky-sidebar" id="aside-js">
					<div class="tt-wrapper-aside">
						<div class="tt-label-aside">
							<a href="javascript:void(0)" class="tt-btn-col-close"><i class="icon-close"></i></a>
							<div class="tt-icon">
								<i class="icon-carsearch"></i>
							</div>
							<div class="tt-title">
								Search Our <br>Shop
							</div>
						</div>
						<div class="tt-aside-box">
							<form id="filter_form">
								<div class="tt-content">
									<div id="tt-filters-aside" class="tt-filters-aside tt-skinSelect-01">
										<div class="tt-col-select">
											<div class="tt-item">
												<select class="tt-select" name="type">
													<option disabled selected>TYPE</option>
													<% if (products.products.length > 0) { %>
														<% const uniqueTypes = Array.from(new Set(products.products.map(product => product.type))) %>
														<% uniqueTypes.forEach(type => { %>
															<option value="<%= type %>"><%= type %></option>
														<% }) %>
													<% } %>
												</select>
												<select class="tt-select" name="year">
													<option disabled selected>YEAR</option>
													<% if (products.products.length > 0) { %>
														<% const uniqueTypes = Array.from(new Set(products.products.map(product => product.year))) %>
														<% uniqueTypes.forEach(year => { %>
															<option value="<%= year %>"><%= year %></option>
														<% }) %>
													<% } %>
												</select>
											</div>
											<div class="tt-item">
												<select class="tt-select" name="brand">
													<option disabled selected>SELECT BRAND NAME</option>
													<% if (products.products.length > 0) { %>
														<% const uniqueTypes = Array.from(new Set(products.products.map(product => product.brand))) %>
														<% uniqueTypes.forEach(brand => { %>
															<option value="<%= brand %>"><%= brand %></option>
														<% }) %>
													<% } %>
												</select>
												<select class="tt-select" name="model">
													<option disabled selected>SELECT A MODEL</option>
													<% if (products.products.length > 0) { %>
														<% const uniqueTypes = Array.from(new Set(products.products.map(product => product.model))) %>
														<% uniqueTypes.forEach(model => { %>
															<option value="<%= model %>"><%= model %></option>
														<% }) %>
													<% } %>
												</select>
											</div>
											<div class="tt-item">
												<select class="tt-select" name="accidented">
													<option disabled selected>IS ACCIDENTED ?</option>
													<% if (products.products.length > 0) { %>
														<% const uniqueTypes = Array.from(new Set(products.products.map(product => product.accidented))) %>
														<% uniqueTypes.forEach(accidented => { %>
															<option value="<%= accidented %>"><%= accidented %></option>
														<% }) %>
													<% } %>
												</select>
												<select class="tt-select" name="price">
													<option disabled selected>PRICE RANGE</option>
													<% if (products.products.length > 0) { %>
														<% const uniqueTypes = Array.from(new Set(products.products.map(product => product.price))) %>
														<% uniqueTypes.forEach(price => { %>
															<option value="<%= price %>"><%= price %></option>
														<% }) %>
													<% } %>
												</select>
											</div>
										</div>
										<div class="tt-col-btn">
											<button type="reset" class="btn btn-color02">RESET FILTERS</button>
											<button type="submit" class="btn"><i class="icon-filer"></i>FILTER</button>
										</div>
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>
				<div class="col-md-12 col-lg-9 col-xl-9">
					<div class="tt-filters-options tt-skinSelect-01">
						<div class="tt-btn-toggle" id="tt-btn-toggle-js">
							<a href="javascript:void(0)"></a>
						</div>
						<div class="tt-quantity">
							<a href="javascript:void(0)" class="icon-grid active" data-value="icon-listing"></a>
							<a href="javascript:void(0)" class="tt-grid-switch icon-listing"></a>
						</div>
					</div>
					<div id="tt-product-listing" class="tt-product-listing row">
						<% if (products.products.length > 0) { %>
							<% products.products.forEach(product => { %>
								<div class="col-6 col-md-4 tt-col-item">
									<div class="tt-product-02">
										<div class="tt-image-box">
											<a href="/shop/<%= product.id %>" class="tt-img">
												<img src="/product/<%= product.images[0] %>" alt="">
												<span class="tt-label-location">
													<% if (product.type === "New") { %>
														<span class="tt-label-new">
															<%= product.type %>
														</span>
													<% } %>
												</span>
												<span class="tt-data">Mileage: <%= product.mileage %></span>
											</a>
										</div>
										<div class="tt-wrapper-description">
											<div class="tt-row-01">
												<div class="tt-box-title">
													<h2 class="tt-title"><a href="/shop/<%= product.id %>"><%= product.title %></a></h2>
													<div class="tt-description"><%= product.model %> - <%= product.year %></div>
												</div>
												<div class="tt-box-price">
													<span class="tt-text">Price:</span>
													<span class="tt-price">Rs. <%= product.price %></span>
												</div>
											</div>
											<div class="tt-btn">
												<a href="/shop/<%= product.id %>" class="tt-btn-moreinfo">more info</a>
											</div>
										</div>
									</div>
								</div>
							<% }) %>
						<% } %>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<%- include('../../layout/footer.ejs'); %>
<script src="../pages/shop/shop.js"></script>